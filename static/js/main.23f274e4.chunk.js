(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(44),s=n.n(a),o=n(20),i=n(32),l=n(8),u=n(93),j=n(99),d=n(11),b="LOG_IN",h="LOG_OUT",p="GET_PHONES",O="/",m="/home",f="/login",g="/phone_book",x={isLogged:!1},v={phones:[]},w=Object(l.combineReducers)({logUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(d.a)(Object(d.a)({},e),{},{isLogged:!0});case h:return Object(d.a)(Object(d.a)({},e),{},{isLogged:!1});default:return e}},setPhones:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(d.a)(Object(d.a)({},e),{},{phones:t.payload});default:return e}}}),N=n(100),S=n(6),_=n.n(S),y=n(49),L=_.a.mark(E),k=_.a.mark(M),I=_.a.mark(P),T=_.a.mark(A),C=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function E(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Hello Sagas!");case 1:case"end":return e.stop()}}),L)}function M(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(1e3);case 2:return e.next=4,Object(y.b)({type:"INCREMENT"});case 4:case"end":return e.stop()}}),k)}function P(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.c)("INCREMENT_ASYNC",M);case 2:case"end":return e.stop()}}),I)}function A(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([E(),P()]);case 2:case"end":return e.stop()}}),T)}var F=Object(N.a)(),G=Object(l.createStore)(w,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(j.a,F)));F.run(A);var U=G,q=(n(109),n(110),n(9)),R=n(47),Z="current user",H=function(){return!!localStorage.getItem(Z)},B=n(2),D=function(e){var t=e.component,n=e.restricted,r=Object(R.a)(e,["component","restricted"]);return Object(B.jsx)(q.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return H()&&n?Object(B.jsx)(q.a,{to:{pathname:O}}):Object(B.jsx)(t,Object(d.a)({},e))}}))},J=function(e){var t=e.component,n=e.phones,r=Object(R.a)(e,["component","phones"]),c=U.getState();return Object(B.jsx)(q.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return c.logUser.isLogged?Object(B.jsx)(t,Object(d.a)({phones:n},e)):Object(B.jsx)(q.a,{to:{pathname:f}})}}))},z=n(214),V=(n(16),n(98)),W=Object(z.a)({form:"fieldLevelValidation"})((function(e){var t,n,r=e.history,c=(e.reset,Object(V.a)()),a=c.register,s=c.handleSubmit,o=c.watch,i=c.formState.errors,l=(U.getState(),o("email"));return Object(B.jsxs)("form",{onSubmit:s((function(){var e,t;e=!0,U.dispatch({type:b,payload:e}),t=l,localStorage.setItem(Z,t),r.push(O)})),className:"form",children:[" ",Object(B.jsx)("input",Object(d.a)(Object(d.a)({},a("email",{validate:{required:function(e){return e.length||"This field is required"},isCorrect:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||"Invalid email address"}}})),{},{className:"form__field"})),i.email&&Object(B.jsx)("span",{children:null===(t=i.email)||void 0===t?void 0:t.message})," ",Object(B.jsx)("input",Object(d.a)(Object(d.a)({},a("password",{validate:{required:function(e){return e.length||"This field is required"},length:function(e){return e.length>8||"Needs at least 8 symbols"},capital:function(e){return-1!==e.search(/[A-Z]/)||"Must contain at least 1 capital letter"},small:function(e){return-1!==e.search(/[a-z]/)||"Must contain at least 1 small letter"},digits:function(e){return-1!==e.search(/[0-9]/)||"Must contain at least 1 digit"}}})),{},{className:"form__field"})),i.password&&Object(B.jsx)("span",{children:null===(n=i.password)||void 0===n?void 0:n.message}),Object(B.jsx)("input",{type:"submit",className:"form__button"})]})})),Y=function(e){var t=e.phones;return Object(r.useEffect)((function(){}),[]),Object(B.jsx)("main",{className:"main",children:Object(B.jsxs)("div",{className:"container",children:[Object(B.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var r,c,a=e.id,s=e.name,o=e.phone;return(null===(r=t[n-1])||void 0===r?void 0:r.name.last.slice(0,1))!==(null===(c=t[n])||void 0===c?void 0:c.name.last.slice(0,1))?Object(B.jsxs)("li",{className:"withSeparator",children:[Object(B.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(B.jsx)("ul",{className:"firstInRow",children:Object(B.jsxs)("li",{children:[s.last," ",s.first,", phone: ",o]})})]},a):Object(B.jsxs)("li",{children:[s.last," ",s.first,", phone: ",o]},a)}))}),Object(B.jsx)(o.b,{to:"/home",children:"Go home"})]})})},$=function(){var e=function(){localStorage.removeItem(Z),U.dispatch({type:h})},t=U.getState();return Object(B.jsxs)("div",{children:[Object(B.jsx)("h1",{children:"Home"}),t.logUser.isLogged||H()?Object(B.jsx)("button",{onClick:function(){return e()},children:"Click here to log out"}):Object(B.jsx)(o.b,{to:{pathname:f},children:"Go to sign in page"})]})},K=Object(i.b)((function(e){return{phones:e.setPhones.phones,isLogged:e.logUser.isLogged,form:e.form}}))((function(e){var t=e.phones;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(q.d,{children:[Object(B.jsx)(D,{restricted:!1,component:$,path:m,exact:!0}),Object(B.jsx)(D,{restricted:!0,component:W,path:f,exact:!0}),Object(B.jsx)(J,{component:Y,path:O,exact:!0,phones:t}),Object(B.jsx)(q.a,{path:g,to:{pathname:f}})]}),","]})})),Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,215)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(o.a,{children:Object(B.jsx)(i.a,{store:U,children:Object(B.jsx)(K,{})})})}),document.getElementById("root")),Q()}},[[212,1,2]]]);
//# sourceMappingURL=main.23f274e4.chunk.js.map