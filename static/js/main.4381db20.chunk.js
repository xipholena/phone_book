(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{166:function(e,t,n){},167:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n.n(o),i=n(43),s=n.n(i),r=n(18),a=n(21),l=n(8),u=n(89),d=n(95),j=n(9),b=n(213),h="LOG_IN",O="LOG_OUT",p="GET_PHONES",g={isLogged:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(j.a)(Object(j.a)({},e),{},{isLogged:!0});case O:return Object(j.a)(Object(j.a)({},e),{},{isLogged:!1});default:return e}},f={phones:[]},m=Object(l.combineReducers)({logUser:v,setPhones:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(j.a)(Object(j.a)({},e),{},{phones:t.payload});default:return e}},form:b.a}),x=Object(l.createStore)(m,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(d.a))),L=(n(166),n(167),n(7)),y=n(45),S="current user",w=function(){return!!localStorage.getItem(S)},k=n(2),C=function(e){var t=e.component,n=e.restricted,o=Object(y.a)(e,["component","restricted"]);x.getState();return Object(k.jsx)(L.b,Object(j.a)(Object(j.a)({},o),{},{render:function(e){return w()&&n?Object(k.jsx)(L.a,{to:"/"}):Object(k.jsx)(t,Object(j.a)({},e))}}))},I=function(e){var t,n,o=e.component,c=e.phones,i=Object(y.a)(e,["component","phones"]),s=x.getState();return console.log("PrivateRoute",null===s||void 0===s||null===(t=s.form.fieldLevelValidation)||void 0===t||null===(n=t.values)||void 0===n?void 0:n.email),console.log("state.logUser.isLogged",s.logUser.isLogged),Object(k.jsx)(L.b,Object(j.a)(Object(j.a)({},i),{},{render:function(e){return s.logUser.isLogged?Object(k.jsx)(o,Object(j.a)({phones:c},e)):Object(k.jsx)(L.a,{to:"/login"})}}))},P=n(212),U=n(211),N=(n(66),n(92),function(e){return e?void 0:"Please provide us your data"}),_=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0},E=function(e){return e.length<8?"Needs at least 8 symbols":void 0},A=function(e){return-1===e.search(/[A-Z]/)?"Must contain at least 1 capital letter":void 0},G=function(e){return-1===e.search(/[a-z]/)?"Must contain at least 1 small letter":void 0},M=function(e){return-1===e.search(/[0-9]/)?"Must contain at least 1 digit":void 0},T=function(e){var t=e.input,n=e.label,o=e.type,c=e.meta,i=c.touched,s=c.error,r=c.warning;return Object(k.jsxs)("div",{children:[Object(k.jsx)("label",{children:n}),Object(k.jsxs)("div",{children:[Object(k.jsx)("input",Object(j.a)(Object(j.a)({},t),{},{placeholder:n,type:o})),i&&(s&&Object(k.jsx)("span",{children:s})||r&&Object(k.jsx)("span",{children:r}))]})]})},F=Object(U.a)({form:"fieldLevelValidation"})((function(e){var t=e.history,n=e.handleSubmit,o=e.reset,c=(e.onSubmit,x.getState());return Object(k.jsxs)("form",{onSubmit:n((function(){var e,n,o;o=!0,x.dispatch({type:h,payload:o}),function(e){localStorage.setItem(S,e)}(null===(e=c.form.fieldLevelValidation)||void 0===e||null===(n=e.values)||void 0===n?void 0:n.email),t.push("/")})),children:[Object(k.jsx)(P.a,{name:"email",type:"text",component:T,label:"Email",validate:[N,_]}),Object(k.jsx)(P.a,{name:"password",type:"password",component:T,label:"Password",validate:[N,E,A,G,M]}),Object(k.jsxs)("div",{children:[Object(k.jsx)("button",{type:"submit",children:"Submit"}),Object(k.jsx)("button",{type:"button",onClick:o,children:"Clear Values"})]})]})})),V=function(e){var t=e.phones;return Object(o.useEffect)((function(){}),[]),Object(k.jsx)("main",{className:"main",children:Object(k.jsxs)("div",{className:"container",children:[Object(k.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var o,c,i=e.id,s=e.name,r=e.phone;return(null===(o=t[n-1])||void 0===o?void 0:o.name.last.slice(0,1))!==(null===(c=t[n])||void 0===c?void 0:c.name.last.slice(0,1))?Object(k.jsxs)("li",{className:"withSeparator",children:[Object(k.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(k.jsx)("ul",{className:"firstInRow",children:Object(k.jsxs)("li",{children:[s.last," ",s.first,", phone: ",r]})})]},i):Object(k.jsxs)("li",{children:[s.last," ",s.first,", phone: ",r]},i)}))}),Object(k.jsx)(r.b,{to:"/home",children:"Go home"})]})})},Z=n(93),R=n(94),B=n(97),D=n(96),H=function(e){Object(B.a)(n,e);var t=Object(D.a)(n);function n(e){var o;return Object(Z.a)(this,n),(o=t.call(this,e)).handleLogout=function(){localStorage.removeItem(S),x.dispatch({type:O})},o}return Object(R.a)(n,[{key:"render",value:function(){var e=this,t=x.getState();return console.log(this.props,x),Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:"Home"}),t.logUser.isLogged||w()?Object(k.jsx)("button",{onClick:function(){return e.handleLogout()},children:"Click here to log out"}):Object(k.jsx)(r.b,{to:"/login",children:"Go to sign in page"})]})}}]),n}(o.Component),J=Object(a.b)((function(e){return console.log("App",e),{phones:e.setPhones.phones,isLogged:e.logUser.isLogged,form:e.form}}),(function(e){return{onLogUser:function(){return e(v())}}}))((function(e,t){var n=e.phones;return Object(o.useEffect)((function(){console.log(t)}),[]),Object(k.jsxs)(L.d,{children:[Object(k.jsx)(C,{restricted:!1,component:H,path:"/home",exact:!0}),Object(k.jsx)(C,{restricted:!0,component:F,path:"/login",exact:!0}),Object(k.jsx)(I,{component:V,path:"/",exact:!0,phones:n}),Object(k.jsx)(L.a,{path:"/phone_book",to:"/login"})]})})),z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,214)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),o(e),c(e),i(e),s(e)}))};s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(r.a,{children:Object(k.jsx)(a.a,{store:x,children:Object(k.jsx)(J,{})})})}),document.getElementById("root")),z()}},[[210,1,2]]]);
//# sourceMappingURL=main.4381db20.chunk.js.map