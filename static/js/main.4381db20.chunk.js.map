{"version":3,"sources":["constants.js","reducers.js","store.js","utils/index.ts","components/PublicRoute.tsx","components/PrivateRoute.tsx","components/SignIn.tsx","actions.js","components/Book.tsx","containers/Home.tsx","containers/App.tsx","reportWebVitals.ts","index.tsx"],"names":["LOG_IN","LOG_OUT","GET_PHONES","initialStateLogUser","isLogged","logUser","state","action","type","initialStatePhones","phones","rootReducer","combineReducers","setPhones","payload","form","formReducer","store","createStore","composeWithDevTools","applyMiddleware","logger","TOKEN_KEY","isInStorage","localStorage","getItem","PublicRoute","Component","component","restricted","rest","getState","render","props","to","PrivateRoute","console","log","fieldLevelValidation","values","email","required","value","undefined","test","length","capital","search","small","digits","renderField","input","label","meta","touched","error","warning","placeholder","reduxForm","history","handleSubmit","reset","onSubmit","nowLogged","dispatch","setItem","loginToStorage","push","Field","name","validate","onClick","Book","useEffect","className","map","i","id","phone","last","slice","first","Home","handleLogout","removeItem","this","connect","onLogUser","onSetPhones","path","exact","SignIn","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4381db20.chunk.js","sourcesContent":["export const LOG_IN = 'LOG_IN';\nexport const LOG_OUT = 'LOG_OUT';\nexport const GET_PHONES = 'GET_PHONES';\n","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form'\nimport { LOG_IN, LOG_OUT, GET_PHONES } from './constants';\n\nexport const initialStateLogUser = {\n  isLogged: false, //change to false!!!\n\n};\n\nexport const logUser = (state = initialStateLogUser, action) => {\n  switch (action.type) {\n    case LOG_IN:\n      return {\n        ...state,\n        isLogged: true,\n      };\n    case LOG_OUT:\n      return {\n        ...state,\n        isLogged: false,\n      };\n    default:\n      return state;\n  }\n};\nexport const initialStatePhones = {\n  phones: [],\n};\nexport const setPhones = (state = initialStatePhones, action) => {\n  switch (action.type) {\n    case GET_PHONES:\n      return {\n        ...state,\n        phones: action.payload,\n      };\n    default:\n      return state;\n  }\n};\n\nexport const rootReducer = combineReducers({\n  logUser,\n  setPhones,\n  form: formReducer\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport {logger} from \"redux-logger/src\";\nimport { rootReducer, initialState } from './reducers';\n\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(logger)));\n\nexport default store;\n","const TOKEN_KEY = 'current user';\n\nexport const loginToStorage = (email: string): void => {\n  localStorage.setItem(TOKEN_KEY, email);\n};\n\nexport const logoutOfStorage = (/*email: string*/): void => {\n  localStorage.removeItem(TOKEN_KEY);\n};\n\nexport const isInStorage = (): boolean => {\n  if (localStorage.getItem(TOKEN_KEY)) {\n    return true;\n  }\n\n  return false;\n};\n","import React, {useEffect} from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { isInStorage } from '../utils';\nimport store from \"../store\";\n\ntype PublicRouteProps = {\n  component: any;\n  restricted: any;\n  path: string;\n  exact: boolean;\n};\nconst PublicRoute = ({ component: Component, restricted, ...rest }: PublicRouteProps): React.ReactElement => {\n  const state: any = store.getState()\n  return (\n    <Route\n      {...rest}\n      render={props => (isInStorage() && restricted ? <Redirect to='/' /> : <Component {...props} />)}\n    />\n  );\n};\n\nexport default PublicRoute;\n","import React, {useEffect} from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { isInStorage } from '../utils';\nimport { IPerson } from '../containers/App';\nimport store from \"../store\";\n\ntype PrivateRouteProps = {\n  component: any;\n  phones: Array<IPerson>;\n  /*getPhonesHandler: any;*/\n  path: string;\n  exact: boolean;\n};\nconst PrivateRoute = ({\n  component: Component,\n  phones,\n  /*getPhonesHandler,*/\n  ...rest\n}: PrivateRouteProps): React.ReactElement => {\n    const state: any = store.getState();\n    console.log('PrivateRoute',state?.form.fieldLevelValidation?.values?.email)\n    console.log('state.logUser.isLogged', state.logUser.isLogged)\n  return (\n    <Route\n      {...rest}\n      render={props =>\n          state.logUser.isLogged ? (\n          <Component phones={phones} /*getPhonesHandler={getPhonesHandler}*/ {...props} />\n        ) : (\n          <Redirect to='/login' />\n        )\n      }\n    />\n  );\n};\n\nexport default PrivateRoute;\n\n","import React, {FC} from 'react'\nimport { Field, reduxForm, formValueSelector } from 'redux-form'\nimport store from \"../store\";\nimport {LOG_IN} from \"../constants\";\nimport {logIn} from \"../actions\";\nimport {loginToStorage} from \"../utils\";\n\nconst required = (value: string) => !value ? 'Please provide us your data' : undefined\nconst email = (value: string) => value && !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value)\n    ? 'Invalid email address'\n    : undefined\nconst length = (value: string) => value.length < 8 ? 'Needs at least 8 symbols' : undefined\nconst capital = (value: string) => value.search(/[A-Z]/) === -1 ? 'Must contain at least 1 capital letter' : undefined\nconst small = (value: string) => value.search(/[a-z]/) === -1 ?  'Must contain at least 1 small letter': undefined\nconst digits = (value: string) => value.search(/[0-9]/) === -1 ? 'Must contain at least 1 digit' : undefined\n\nconst renderField = ({ input, label, type, meta }: any) => {\n    const { touched, error, warning } = meta;\n    //console.log(meta)\n    return (\n        <div>\n            <label>{label}</label>\n            <div>\n                <input {...input} placeholder={label} type={type}/>\n                {touched && ((error && <span>{error}</span>) || (warning && <span>{warning}</span>))}\n            </div>\n        </div>\n    )\n}\n\n\n\nlet SignIn:FC = (props: any) => {\n    const { history, handleSubmit, reset, onSubmit} = props\n    const state = store.getState()\n\n    //was props: RouteComponentProps\n    const handleLogin = () => {\n       //props.dispatch({ type: LOG_IN })\n       //store.dispatch({ type: LOG_IN })\n        logIn(true);\n        loginToStorage(state.form.fieldLevelValidation?.values?.email);\n        history.push('/');\n    }\n\n    return (\n        <form onSubmit={handleSubmit(handleLogin)}>\n            <Field name=\"email\" type=\"text\"\n                   component={renderField} label=\"Email\"\n                   validate={[required, email]}\n            />\n            <Field name=\"password\" type=\"password\"\n                   component={renderField} label=\"Password\"\n                   validate={[required, length, capital, small, digits]}\n            />\n            <div>\n                <button type=\"submit\" >Submit</button>\n                <button type=\"button\" onClick={reset}>Clear Values</button>\n            </div>\n        </form>\n    )\n}\n\nexport default reduxForm({\n    form: 'fieldLevelValidation', // a unique identifier for this form\n})(SignIn)\n","import { LOG_IN, LOG_OUT, GET_PHONES } from './constants';\nimport { IPerson } from './containers/App';\nimport store from \"./store\";\n\nexport const logIn = (nowLogged) =>  {\n  store.dispatch({ type: LOG_IN, payload: nowLogged });\n};\n\nexport const logOut = () => {\n  store.dispatch({type: LOG_OUT});\n};\n\nexport const getPhones = () => dispatch => {\n  async function getPhonesHandler() {\n    return fetch('http://localhost:3000/phones.json', {\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n      },\n    })\n      .then(response => response.json())\n      .then(data =>\n        dispatch({\n          type: GET_PHONES,\n          payload: data.phones.sort((a, b) => a.name.last.localeCompare(b.name.last)),\n        })\n      )\n      .catch(e => {\n        console.log(e.toString());\n      });\n  }\n};\n\n//const logIn = (email, password) => ({type: LOG_IN, payload: {email, password}})\n// const logOut = (email) => ({type: LOG_OUT, payload: email})//email to find and remove key from localStorage\n//const getPhones = (url) => ({type: GET_PHONES, payload: url})\n","import React, { useEffect } from 'react';\nimport { IPerson } from '../containers/App';\nimport { Link } from 'react-router-dom';\n\ninterface BookProps {\n  phones: Array<IPerson>;\n  //getPhonesHandler: () => void;\n}\n\nconst Book = ({ phones /*getPhonesHandler */ }: BookProps): React.ReactElement => {\n  useEffect(() => {\n    //getPhonesHandler();\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <main className='main'>\n      <div className='container'>\n        <ul>\n          {phones?.map(({ id, name, phone }: IPerson, i) => {\n            if (phones[i - 1]?.name.last.slice(0, 1) !== phones[i]?.name.last.slice(0, 1)) {\n              return (\n                <li key={id} className='withSeparator'>\n                  <p>{phones[i].name.last.slice(0, 1)} </p>\n                  <ul className='firstInRow'>\n                    <li>\n                      {name.last} {name.first}, phone: {phone}\n                    </li>\n                  </ul>\n                </li>\n              );\n            } else {\n              return (\n                <li key={id}>\n                  {name.last} {name.first}, phone: {phone}\n                </li>\n              );\n            }\n          })}\n        </ul>\n        <Link to='/home'>Go home</Link>\n      </div>\n    </main>\n  );\n};\n\nexport default Book;\n","import React, { Component } from 'react';\nimport { logoutOfStorage,  isInStorage } from '../utils';\nimport { Link, RouteComponentProps } from 'react-router-dom';\nimport store from \"../store\";\nimport {LOG_OUT} from \"../constants\";\nimport {logOut} from \"../actions\";\n\n// RouteComponentProps<MatchParams>\nclass Home extends Component<any> {\n  constructor(props: any ) {\n    super(props);\n  }\n\n  handleLogout = (): void => {\n    logoutOfStorage();\n    logOut();\n    //store.dispatch({type: LOG_OUT})\n    //this.props.dispatch({type: LOG_OUT})\n  };\n\n  render(): React.ReactElement {\n    const state = store.getState()\n    console.log(this.props, store)\n    return (\n      <div>\n        <h1>Home</h1>\n\n        {state.logUser.isLogged || isInStorage()  ? (\n          <button onClick={() => this.handleLogout()}>Click here to log out</button>\n        ) : (\n          <Link to='/login'>Go to sign in page</Link>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Home;\n","import React, { useState, FC, useEffect } from 'react';\nimport './App.css';\nimport { Redirect, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nimport PublicRoute from '../components/PublicRoute';\nimport PrivateRoute from '../components/PrivateRoute';\nimport SignIn from '../components/SignIn';\nimport Book from '../components/Book';\nimport Home from './Home';\n\nimport { logUser, setPhones } from '../reducers';\ninterface IName {\n  first: string;\n  last: string;\n}\n\nexport interface IPerson {\n  id: string;\n  isActive: boolean;\n  age?: number;\n  name: IName;\n  company?: string;\n  email?: string;\n  phone: string;\n  address?: string;\n  registered: string;\n}\nconst mapStateToProps = (state: any) => {\n  console.log('App', state)\n  return {\n    phones: state.setPhones.phones,\n    isLogged: state.logUser.isLogged,\n    form: state.form\n  };\n};\nconst mapDispatchToProps = (dispatch: any) => {\n  //call reducers with DOM events to App props\n  return {\n    onLogUser: () => dispatch(logUser()),\n    //onSetPhones: () => dispatch(setPhones()),\n  };\n};\nconst App = ({ phones }: { phones: Array<IPerson> }, onSetPhones: any): React.ReactElement => {\n\n  useEffect(() => {\n    console.log(onSetPhones);\n  }, []);\n  return (\n    <Switch>\n      <PublicRoute restricted={false} component={Home} path='/home' exact />\n      <PublicRoute restricted={true} component={SignIn} path='/login' exact />\n      <PrivateRoute component={Book} path='/' exact phones={phones} />\n      <Redirect path='/phone_book' to='/login' />\n    </Switch>\n  );\n};\n/*getPhonesHandler = {onSetPhones}*/\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport './index.css';\nimport App from './containers/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root') as HTMLElement\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}