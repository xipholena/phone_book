(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(20),s=n.n(a),i=n(15),o=n(9),u=n(16),l=n(28),j=n(7),d="LOG_IN_REQUEST",b="LOG_IN_SUCCESS",O="LOG_IN_FAILED",h="LOG_OUT",p="/",m="/home",f="/login",g="/phone_book",x="GET_USERS_REQUESTED",v="GET_USERS_SUCCESS",_="GET_USERS_FAILED",w={isLogged:!1,isLoading:!1,email:"",error:null},S={users:[],loading:!1,error:null};var L=Object(u.combineReducers)({logUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case b:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,isLogged:!0});case O:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,isLogged:!1,error:t.message});case h:return Object(j.a)(Object(j.a)({},e),{},{isLogged:!1});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case v:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,users:t.users});case _:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.message});default:return e}}}),N=n(30),E=n(6),k=n.n(E),y=n(13),U=function(){return{type:d}},C=function(){return{type:h}},I=function(e){return{type:v,users:e}},T="current user",G=k.a.mark(Z),F=k.a.mark(B),A=k.a.mark(J),R=k.a.mark(P),D=k.a.mark(Q),M=k.a.mark(W),q=function(){return fetch("http://localhost:3000/phones.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e.toString())}))};function Z(e){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.c)(1e3);case 3:return e.next=5,Object(y.b)(q);case 5:return t=e.sent,e.next=8,Object(y.d)(I(t));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(y.d)((n=e.t0,{type:_,message:n.message}));case 14:case"end":return e.stop()}var n}),G,null,[[0,10]])}function B(e){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.c)(1e3);case 3:return localStorage.setItem(T,"some email"),e.next=6,Object(y.d)({type:b});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(y.d)((t=e.t0,{type:O,message:t.message}));case 12:case"end":return e.stop()}var t}),F,null,[[0,8]])}function J(e){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem(T),e.next=3,Object(y.d)(C());case 3:case"end":return e.stop()}}),A)}function P(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(d,B);case 2:return e.next=4,Object(y.e)(h,J);case 4:case"end":return e.stop()}}),R)}function Q(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(x,Z);case 2:case"end":return e.stop()}}),D)}function W(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([Q(),P()]);case 2:case"end":return e.stop()}}),M)}var z=Object(N.a)(),H=Object(u.createStore)(L,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(z)));z.run(W);var $=H,K=(n(39),n(40),n(8)),V=n(23),X=n(2),Y=function(e){var t=e.component,n=e.restricted,c=Object(V.a)(e,["component","restricted"]),r=Object(o.d)((function(e){return e}));return Object(X.jsx)(K.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return r.logUser.isLogged&&n?Object(X.jsx)(K.a,{to:{pathname:p}}):Object(X.jsx)(t,Object(j.a)({},e))}}))},ee=function(e){var t=e.component,n=Object(V.a)(e,["component"]),c=Object(o.d)((function(e){return e}));return Object(X.jsx)(K.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return c.logUser.isLogged?Object(X.jsx)(t,Object(j.a)({},e)):Object(X.jsx)(K.a,{to:{pathname:f}})}}))},te=n(29),ne=function(){var e,t,n=Object(te.a)(),c=n.register,r=n.handleSubmit,a=n.watch,s=n.formState.errors,i=a("email"),u=Object(o.c)(),l=Object(o.d)((function(e){return e.logUser.isLoading}));return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("form",{onSubmit:r((function(){u(U(i))})),className:"form",children:[" ",Object(X.jsx)("input",Object(j.a)(Object(j.a)({},c("email",{validate:{required:function(e){return e.length||"This field is required"},isCorrect:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||"Invalid email address"}}})),{},{className:"form__field"})),s.email&&Object(X.jsx)("span",{children:null===(e=s.email)||void 0===e?void 0:e.message})," ",Object(X.jsx)("input",Object(j.a)(Object(j.a)({},c("password",{validate:{required:function(e){return e.length||"This field is required"},length:function(e){return e.length>8||"Needs at least 8 symbols"},capital:function(e){return-1!==e.search(/[A-Z]/)||"Must contain at least 1 capital letter"},small:function(e){return-1!==e.search(/[a-z]/)||"Must contain at least 1 small letter"},digits:function(e){return-1!==e.search(/[0-9]/)||"Must contain at least 1 digit"}}})),{},{className:"form__field"})),s.password&&Object(X.jsx)("span",{children:null===(t=s.password)||void 0===t?void 0:t.message}),Object(X.jsx)("input",{type:"submit",className:"form__button"})]}),l?Object(X.jsx)("div",{className:"dialog",children:Object(X.jsx)("div",{className:"dialog__overlay",children:Object(X.jsx)("div",{className:"dialog__window",children:Object(X.jsx)("p",{className:"dialog__msg",children:"Getting access..."})})})}):Object(X.jsx)(X.Fragment,{})]})},ce=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){var t;return null===(t=e.users.users.phones)||void 0===t?void 0:t.sort((function(e,t){return e.name.last.localeCompare(t.name.last)}))})),n=Object(o.d)((function(e){return e.users.loading}));return Object(c.useEffect)((function(){e({type:x})}),[]),Object(X.jsxs)("main",{className:"main",children:[Object(X.jsx)("div",{className:"bg",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsx)(i.b,{to:{pathname:m},className:"main__link",children:"Go home"})})}),Object(X.jsx)("div",{className:"container",children:n?Object(X.jsx)("p",{children:"Wait for it..."}):Object(X.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var c,r,a=e.id,s=e.name,i=e.phone;return(null===(c=t[n-1])||void 0===c?void 0:c.name.last.slice(0,1))!==(null===(r=t[n])||void 0===r?void 0:r.name.last.slice(0,1))?Object(X.jsxs)("li",{className:"withSeparator",children:[Object(X.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(X.jsx)("ul",{className:"firstInRow",children:Object(X.jsxs)("li",{children:[s.last," ",s.first,", phone: ",i]})})]},a):Object(X.jsxs)("li",{children:[s.last," ",s.first,", phone: ",i]},a)}))})})]})},re=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e}));return Object(X.jsxs)("div",{children:[Object(X.jsx)("h1",{children:"Home"}),t.logUser.isLogged?Object(X.jsx)("button",{onClick:function(){e(C())},children:"Click here to log out"}):Object(X.jsx)(i.b,{to:{pathname:f},children:"Go to sign in page"})]})},ae=Object(o.b)((function(e){return{phones:e.users.users.phones,isLogged:e.logUser.isLogged}}))((function(e){e.phones;var t=Object(o.c)();return Object(c.useEffect)((function(){localStorage.getItem(T)&&t(U())}),[t]),Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(K.d,{children:[Object(X.jsx)(ee,{component:ce,path:p,exact:!0}),Object(X.jsx)(Y,{restricted:!1,component:re,path:m,exact:!0}),Object(X.jsx)(Y,{restricted:!0,component:ne,path:f,exact:!0}),Object(X.jsx)(K.a,{path:g,to:{pathname:f}})]})})})),se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(X.jsx)(r.a.StrictMode,{children:Object(X.jsx)(i.a,{children:Object(X.jsx)(o.a,{store:$,children:Object(X.jsx)(ae,{})})})}),document.getElementById("root")),se()}},[[44,1,2]]]);
//# sourceMappingURL=main.4c5b9116.chunk.js.map