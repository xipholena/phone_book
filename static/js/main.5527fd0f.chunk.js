(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(20),a=n.n(s),o=n(15),i=n(8),u=n(16),l=n(28),j=n(7),d="LOG_IN_REQUEST",b="LOG_IN_SUCCESS",O="LOG_IN_FAILED",h="LOG_OUT",p="/",f="/home",m="/login",g="/phone_book",x="GET_USERS_REQUESTED",v="GET_USERS_SUCCESS",_="GET_USERS_FAILED",w={isLogged:!1,isLoading:!1,email:"",error:null},S={users:[],loading:!1,error:null};var L=Object(u.combineReducers)({logUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case b:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,isLogged:!0});case O:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,isLogged:!1,error:t.message});case h:return Object(j.a)(Object(j.a)({},e),{},{isLogged:!1});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case v:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,users:t.users});case _:return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.message});default:return e}}}),E=n(30),N=n(6),k=n.n(N),y=n(13),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{type:d,payload:e}},C=function(){return{type:h}},I="current user",T=k.a.mark(q),G=k.a.mark(Z),F=k.a.mark(B),A=k.a.mark(J),R=k.a.mark(P),D=k.a.mark(Q),M=function(){return fetch("http://localhost:3000/phones.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e.toString())}))};function q(e){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.c)(1e3);case 3:return e.next=5,Object(y.b)(M);case 5:return t=e.sent,e.next=8,Object(y.d)({type:v,users:t});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(y.d)({type:_,error:e.t0.message});case 14:case"end":return e.stop()}}),T,null,[[0,10]])}function Z(e){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(y.c)(1e3);case 3:return localStorage.setItem(I,"some email"),e.next=6,Object(y.d)({type:b});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(y.d)({type:O,message:e.t0.message});case 12:case"end":return e.stop()}}),G,null,[[0,8]])}function B(e){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem(I),e.next=3,Object(y.d)(C());case 3:case"end":return e.stop()}}),F)}function J(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(d,Z);case 2:return e.next=4,Object(y.e)(h,B);case 4:case"end":return e.stop()}}),A)}function P(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.e)(x,q);case 2:case"end":return e.stop()}}),R)}function Q(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.a)([P(),J()]);case 2:case"end":return e.stop()}}),D)}var W=Object(E.a)(),z=Object(u.createStore)(L,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(W)));W.run(Q);var H=z,$=(n(39),n(40),n(9)),K=n(23),V=n(2),X=function(e){var t=e.component,n=e.restricted,r=Object(K.a)(e,["component","restricted"]),c=Object(i.d)((function(e){return e}));return Object(V.jsx)($.b,Object(j.a)(Object(j.a)({},r),{},{render:function(e){return c.logUser.isLogged&&n?Object(V.jsx)($.a,{to:{pathname:p}}):Object(V.jsx)(t,Object(j.a)({},e))}}))},Y=function(e){var t=e.component,n=Object(K.a)(e,["component"]),r=Object(i.d)((function(e){return e}));return Object(V.jsx)($.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return r.logUser.isLogged?Object(V.jsx)(t,Object(j.a)({},e)):Object(V.jsx)($.a,{to:{pathname:m}})}}))},ee=n(29),te=function(e){var t,n,c=Object(ee.a)(),s=c.register,a=c.handleSubmit,o=c.watch,u=c.formState.errors,l=o("email"),d=Object(i.c)(),b=Object(i.d)((function(e){return e.logUser.isLoading}));return Object(r.useEffect)((function(){console.log(e)}),[]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("form",{onSubmit:a((function(){d(U(l))})),className:"form",children:[" ",Object(V.jsx)("input",Object(j.a)(Object(j.a)({},s("email",{validate:{required:function(e){return e.length||"This field is required"},isCorrect:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||"Invalid email address"}}})),{},{className:"form__field"})),u.email&&Object(V.jsx)("span",{children:null===(t=u.email)||void 0===t?void 0:t.message})," ",Object(V.jsx)("input",Object(j.a)(Object(j.a)({},s("password",{validate:{required:function(e){return e.length||"This field is required"},length:function(e){return e.length>8||"Needs at least 8 symbols"},capital:function(e){return-1!==e.search(/[A-Z]/)||"Must contain at least 1 capital letter"},small:function(e){return-1!==e.search(/[a-z]/)||"Must contain at least 1 small letter"},digits:function(e){return-1!==e.search(/[0-9]/)||"Must contain at least 1 digit"}}})),{},{className:"form__field"})),u.password&&Object(V.jsx)("span",{children:null===(n=u.password)||void 0===n?void 0:n.message}),Object(V.jsx)("input",{type:"submit",className:"form__button"})]}),b?Object(V.jsx)("div",{className:"dialog",children:Object(V.jsx)("div",{className:"dialog__overlay",children:Object(V.jsx)("div",{className:"dialog__window",children:Object(V.jsx)("p",{className:"dialog__msg",children:"Getting access..."})})})}):Object(V.jsx)(V.Fragment,{})]})},ne=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t;return null===(t=e.users.users.phones)||void 0===t?void 0:t.sort((function(e,t){return e.name.last.localeCompare(t.name.last)}))})),n=(Object(i.d)((function(e){return e.users.users})),Object(i.d)((function(e){return e.users.loading})));Object(i.d)((function(e){return e.users.error}));return Object(r.useEffect)((function(){e({type:x})}),[]),Object(V.jsxs)("main",{className:"main",children:[Object(V.jsx)("div",{className:"bg",children:Object(V.jsx)("div",{className:"container",children:Object(V.jsx)(o.b,{to:{pathname:f},className:"main__link",children:"Go home"})})}),Object(V.jsx)("div",{className:"container",children:n?Object(V.jsx)("p",{children:"Wait for it..."}):Object(V.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var r,c,s=e.id,a=e.name,o=e.phone;return(null===(r=t[n-1])||void 0===r?void 0:r.name.last.slice(0,1))!==(null===(c=t[n])||void 0===c?void 0:c.name.last.slice(0,1))?Object(V.jsxs)("li",{className:"withSeparator",children:[Object(V.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(V.jsx)("ul",{className:"firstInRow",children:Object(V.jsxs)("li",{children:[a.last," ",a.first,", phone: ",o]})})]},s):Object(V.jsxs)("li",{children:[a.last," ",a.first,", phone: ",o]},s)}))})})]})},re=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e}));return Object(V.jsxs)("div",{children:[Object(V.jsx)("h1",{children:"Home"}),t.logUser.isLogged?Object(V.jsx)("button",{onClick:function(){e(C())},children:"Click here to log out"}):Object(V.jsx)(o.b,{to:{pathname:m},children:"Go to sign in page"})]})},ce=Object(i.b)((function(e){return{phones:e.users.users.phones,isLogged:e.logUser.isLogged}}))((function(e){e.phones,Object(i.d)((function(e){return e}));var t=Object(i.c)();return Object(r.useEffect)((function(){localStorage.getItem(I)&&t(U())}),[t]),Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)($.d,{children:[Object(V.jsx)(Y,{component:ne,path:p,exact:!0}),Object(V.jsx)(X,{restricted:!1,component:re,path:f,exact:!0}),Object(V.jsx)(X,{restricted:!0,component:te,path:m,exact:!0}),Object(V.jsx)($.a,{path:g,to:{pathname:m}})]})})})),se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(V.jsx)(c.a.StrictMode,{children:Object(V.jsx)(o.a,{children:Object(V.jsx)(i.a,{store:H,children:Object(V.jsx)(ce,{})})})}),document.getElementById("root")),se()}},[[44,1,2]]]);
//# sourceMappingURL=main.5527fd0f.chunk.js.map