(this.webpackJsonpundefined=this.webpackJsonpundefined||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),r=n(20),a=n.n(r),i=n(14),o=n(9),l=n(16),j=n(28),d=n(7),u="LOG_IN_REQUEST",b="LOG_IN_SUCCESS",p="LOG_IN_FAILED",O="LOG_OUT",h="/",m="/home",f="/login",x={phone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":personId";return"/".concat(e)}},g="GET_USERS_REQUESTED",v="GET_USERS_SUCCESS",_="GET_USERS_FAILED",N={users:[],loading:!1,error:null},S={isLogged:!1,isLoading:!1,email:"",error:null},w=Object(l.combineReducers)({logUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!0});case b:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isLogged:!0});case p:return Object(d.a)(Object(d.a)({},e),{},{isLoading:!1,isLogged:!1,error:t.message});case O:return Object(d.a)(Object(d.a)({},e),{},{isLogged:!1});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,users:t.users});case _:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.message});default:return e}}}),L=n(30),E=n(6),y=n.n(E),I=n(13),k=function(){return{type:u}},C=function(){return{type:O}},U=function(e){return{type:v,users:e}},T="current user",A=y.a.mark(Z),F=y.a.mark(P),G=y.a.mark(B),R=y.a.mark(J),M=y.a.mark(Q),D=y.a.mark(W),q=function(){return fetch("http://localhost:3000/phones.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.phones})).catch((function(e){console.log(e.toString())}))};function Z(e){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(I.c)(1e3);case 3:return e.next=5,Object(I.b)(q);case 5:return t=e.sent,e.next=8,Object(I.d)(U(t));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(I.d)((n=e.t0,{type:_,message:n.message}));case 14:case"end":return e.stop()}var n}),A,null,[[0,10]])}function P(e){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(I.c)(1e3);case 3:return localStorage.setItem(T,"some email"),e.next=6,Object(I.d)({type:b});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(I.d)((t=e.t0,{type:p,message:t.message}));case 12:case"end":return e.stop()}var t}),F,null,[[0,8]])}function B(e){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.removeItem(T),e.next=3,Object(I.d)(C());case 3:case"end":return e.stop()}}),G)}function J(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)(u,P);case 2:return e.next=4,Object(I.e)(O,B);case 4:case"end":return e.stop()}}),R)}function Q(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.e)(g,Z);case 2:case"end":return e.stop()}}),M)}function W(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)([Q(),J()]);case 2:case"end":return e.stop()}}),D)}var z=Object(L.a)(),H=Object(l.createStore)(w,Object(j.composeWithDevTools)(Object(l.applyMiddleware)(z)));z.run(W);var $=H,K=(n(39),n(40),n(8)),V=n(23),X=n(2),Y=function(e){var t=e.component,n=e.restricted,c=Object(V.a)(e,["component","restricted"]),s=Object(o.c)((function(e){return e}));return Object(X.jsx)(K.b,Object(d.a)(Object(d.a)({},c),{},{render:function(e){return s.logUser.isLogged&&n?Object(X.jsx)(K.a,{to:{pathname:h}}):Object(X.jsx)(t,Object(d.a)({},e))}}))},ee=function(e){var t=e.component,n=Object(V.a)(e,["component"]),c=Object(o.c)((function(e){return e}));return Object(X.jsx)(K.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return c.logUser.isLogged?Object(X.jsx)(t,Object(d.a)({},e)):Object(X.jsx)(K.a,{to:{pathname:f}})}}))},te=n(29),ne=function(){var e,t,n=Object(te.a)(),c=n.register,s=n.handleSubmit,r=n.watch,a=n.formState.errors,i=r("email"),l=Object(o.b)(),j=Object(o.c)((function(e){return e.logUser.isLoading}));return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("form",{onSubmit:s((function(){l(k(i))})),className:"form",children:[" ",Object(X.jsx)("input",Object(d.a)(Object(d.a)({},c("email",{validate:{required:function(e){return e.length||"This field is required"},isCorrect:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||"Invalid email address"}}})),{},{className:"form__field"})),a.email&&Object(X.jsx)("span",{children:null===(e=a.email)||void 0===e?void 0:e.message})," ",Object(X.jsx)("input",Object(d.a)(Object(d.a)({},c("password",{validate:{required:function(e){return e.length||"This field is required"},length:function(e){return e.length>8||"Needs at least 8 symbols"},capital:function(e){return-1!==e.search(/[A-Z]/)||"Must contain at least 1 capital letter"},small:function(e){return-1!==e.search(/[a-z]/)||"Must contain at least 1 small letter"},digits:function(e){return-1!==e.search(/[0-9]/)||"Must contain at least 1 digit"}}})),{},{className:"form__field"})),a.password&&Object(X.jsx)("span",{children:null===(t=a.password)||void 0===t?void 0:t.message}),Object(X.jsx)("input",{type:"submit",className:"form__button"})]}),j?Object(X.jsx)("div",{className:"dialog",children:Object(X.jsx)("div",{className:"dialog__overlay",children:Object(X.jsx)("div",{className:"dialog__window",children:Object(X.jsx)("p",{className:"dialog__msg",children:"Getting access..."})})})}):Object(X.jsx)(X.Fragment,{})]})},ce=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){var t;return null===(t=e.users.users)||void 0===t?void 0:t.sort((function(e,t){return e.name.last.localeCompare(t.name.last)}))})),n=Object(o.c)((function(e){return e.users.loading}));return Object(c.useEffect)((function(){e({type:g})}),[]),Object(X.jsxs)("main",{className:"main",children:[Object(X.jsx)("div",{className:"bg",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsx)(i.b,{to:{pathname:m},className:"main__link",children:"Go home"})})}),Object(X.jsx)("div",{className:"container",children:n?Object(X.jsx)("p",{children:"Wait for it..."}):Object(X.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var c,s,r=e.id,a=e.name;e.phone;return(null===(c=t[n-1])||void 0===c?void 0:c.name.last.slice(0,1))!==(null===(s=t[n])||void 0===s?void 0:s.name.last.slice(0,1))?Object(X.jsxs)("li",{className:"withSeparator",children:[Object(X.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(X.jsx)("ul",{className:"firstInRow",children:Object(X.jsx)("li",{children:Object(X.jsxs)(i.b,{to:"/".concat(r),children:[a.last," ",a.first]})})})]},r):Object(X.jsx)("li",{children:Object(X.jsxs)(i.b,{to:"/".concat(r),children:[a.last," ",a.first]})},r)}))})})]})},se=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e}));return Object(X.jsxs)("div",{children:[Object(X.jsx)("h1",{children:"Home"}),t.logUser.isLogged?Object(X.jsx)("button",{onClick:function(){e(C())},children:"Click here to log out"}):Object(X.jsx)(i.b,{to:{pathname:f},children:"Go to sign in page"})]})},re=function(){var e=Object(K.g)().personId,t=Object(o.c)((function(e){return e.users.users})),n=Object(c.useMemo)((function(){return null===t||void 0===t?void 0:t.find((function(t){return t.id===e}))}),[t,e]);return n?Object(X.jsx)(X.Fragment,{children:Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("div",{className:"person",children:[Object(X.jsxs)("h1",{children:[n.name.first," ",n.name.last]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"id:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.id})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Status:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.isActive?"active":"not active"})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Age:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.age})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Company:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.company})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Email:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.email})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Phone:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.phone})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Address: "}),Object(X.jsx)("span",{className:"person__info-description",children:n.address})]}),Object(X.jsxs)("p",{children:[Object(X.jsx)("span",{className:"person__info-title",children:"Registered:  "}),Object(X.jsx)("span",{className:"person__info-description",children:n.registered})]})]})})}):null},ae=function(){var e=Object(o.b)();return Object(c.useEffect)((function(){localStorage.getItem(T)&&e(k())}),[e]),Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)(K.d,{children:[Object(X.jsx)(ee,{component:ce,path:h,exact:!0}),Object(X.jsx)(Y,{restricted:!1,component:se,path:m,exact:!0}),Object(X.jsx)(Y,{restricted:!0,component:ne,path:f,exact:!0}),Object(X.jsx)(ee,{component:re,path:x.phone(),exact:!0})]})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(X.jsx)(s.a.StrictMode,{children:Object(X.jsx)(i.a,{children:Object(X.jsx)(o.a,{store:$,children:Object(X.jsx)(ae,{})})})}),document.getElementById("root")),ie()}},[[44,1,2]]]);
//# sourceMappingURL=main.8583178d.chunk.js.map