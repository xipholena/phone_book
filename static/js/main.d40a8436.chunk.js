(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),s=n(23),a=n.n(s),o=n(15),i=n(9),u=n(16),l=n(32),j=n(35),d=n(7),b="LOG_IN",O="LOG_OUT",h="/",p="/home",f="/login",m="/phone_book",g="GET_USERS_REQUESTED",x="GET_USERS_SUCCESS",v="GET_USERS_FAILED",S={isLogged:!1},_={users:[],loading:!1,error:null};var w=Object(u.combineReducers)({logUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(d.a)(Object(d.a)({},e),{},{isLogged:!0});case O:return Object(d.a)(Object(d.a)({},e),{},{isLogged:!1});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,users:t.users});case v:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.message});default:return e}}}),E=n(36),y=n(6),L=n.n(y),k=n(20),N=L.a.mark(I),T=L.a.mark(G),U=L.a.mark(A),C=function(){return fetch("http://localhost:3000/phones.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.log(e.toString())}))};function I(e){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.b)(C);case 3:return t=e.sent,e.next=6,Object(k.c)({type:x,users:t});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(k.c)({type:v,message:e.t0.message});case 12:case"end":return e.stop()}}),N,null,[[0,8]])}function G(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.d)(g,I);case 2:case"end":return e.stop()}}),T)}function A(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([G()]);case 2:case"end":return e.stop()}}),U)}var F=Object(E.a)(),R=Object(u.createStore)(w,Object(l.composeWithDevTools)(Object(u.applyMiddleware)(j.a,F)));F.run(A);var M=R,q=(n(45),n(46),n(8)),D=n(26),Z=n(3),B=function(e){var t=e.component,n=e.restricted,r=Object(D.a)(e,["component","restricted"]),c=Object(i.d)((function(e){return e}));return Object(Z.jsx)(q.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return c.logUser.isLogged&&n?Object(Z.jsx)(q.a,{to:{pathname:h}}):Object(Z.jsx)(t,Object(d.a)({},e))}}))},J=function(e){var t=e.component,n=Object(D.a)(e,["component"]),r=Object(i.d)((function(e){return e}));return Object(Z.jsx)(q.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return r.logUser.isLogged?Object(Z.jsx)(t,Object(d.a)({},e)):Object(Z.jsx)(q.a,{to:{pathname:f}})}}))},P=function(){return{type:b,payload:!0}},z="current user",H=n(34),Q=function(e){var t,n,r=Object(q.g)(),c=Object(H.a)(),s=c.register,a=c.handleSubmit,o=c.watch,u=c.formState.errors,l=o("email"),j=Object(i.c)();return Object(Z.jsxs)("form",{onSubmit:a((function(){var e;j(P()),e=l,localStorage.setItem(z,e),r.push(h)})),className:"form",children:[" ",Object(Z.jsx)("input",Object(d.a)(Object(d.a)({},s("email",{validate:{required:function(e){return e.length||"This field is required"},isCorrect:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||"Invalid email address"}}})),{},{className:"form__field"})),u.email&&Object(Z.jsx)("span",{children:null===(t=u.email)||void 0===t?void 0:t.message})," ",Object(Z.jsx)("input",Object(d.a)(Object(d.a)({},s("password",{validate:{required:function(e){return e.length||"This field is required"},length:function(e){return e.length>8||"Needs at least 8 symbols"},capital:function(e){return-1!==e.search(/[A-Z]/)||"Must contain at least 1 capital letter"},small:function(e){return-1!==e.search(/[a-z]/)||"Must contain at least 1 small letter"},digits:function(e){return-1!==e.search(/[0-9]/)||"Must contain at least 1 digit"}}})),{},{className:"form__field"})),u.password&&Object(Z.jsx)("span",{children:null===(n=u.password)||void 0===n?void 0:n.message}),Object(Z.jsx)("input",{type:"submit",className:"form__button"})]})},W=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){var t;return null===(t=e.users.users.phones)||void 0===t?void 0:t.sort((function(e,t){return e.name.last.localeCompare(t.name.last)}))}));Object(i.d)((function(e){return e.users.users})),Object(i.d)((function(e){return e.users.loading})),Object(i.d)((function(e){return e.users.error}));return Object(r.useEffect)((function(){e({type:g})}),[]),Object(Z.jsx)("main",{className:"main",children:Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsx)(o.b,{to:{pathname:p},className:"main__link",children:"Go home"}),Object(Z.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var r,c,s=e.id,a=e.name,o=e.phone;return(null===(r=t[n-1])||void 0===r?void 0:r.name.last.slice(0,1))!==(null===(c=t[n])||void 0===c?void 0:c.name.last.slice(0,1))?Object(Z.jsxs)("li",{className:"withSeparator",children:[Object(Z.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(Z.jsx)("ul",{className:"firstInRow",children:Object(Z.jsxs)("li",{children:[a.last," ",a.first,", phone: ",o]})})]},s):Object(Z.jsxs)("li",{children:[a.last," ",a.first,", phone: ",o]},s)}))})]})})},$=function(){var e=Object(i.c)(),t=function(){localStorage.removeItem(z),e({type:O})},n=Object(i.d)((function(e){return e}));return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h1",{children:"Home"}),n.logUser.isLogged?Object(Z.jsx)("button",{onClick:function(){return t()},children:"Click here to log out"}):Object(Z.jsx)(o.b,{to:{pathname:f},children:"Go to sign in page"})]})},K=Object(i.b)((function(e){return{phones:e.users.users.phones,isLogged:e.logUser.isLogged,form:e.form}}))((function(e){e.phones,Object(i.d)((function(e){return e}));var t=Object(i.c)();return Object(r.useEffect)((function(){localStorage.getItem(z)&&t(P())}),[t]),Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)(q.d,{children:[Object(Z.jsx)(J,{component:W,path:h,exact:!0}),Object(Z.jsx)(B,{restricted:!1,component:$,path:p,exact:!0}),Object(Z.jsx)(B,{restricted:!0,component:Q,path:f,exact:!0}),Object(Z.jsx)(q.a,{path:m,to:{pathname:f}})]})})})),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(Z.jsx)(c.a.StrictMode,{children:Object(Z.jsx)(o.a,{children:Object(Z.jsx)(i.a,{store:M,children:Object(Z.jsx)(K,{})})})}),document.getElementById("root")),V()}},[[49,1,2]]]);
//# sourceMappingURL=main.d40a8436.chunk.js.map