(this.webpackJsonpphone_book=this.webpackJsonpphone_book||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},206:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),s=n(41),r=n.n(s),i=n(17),a=n(29),l=n(7),j=n(88),d=n(94),u=n(8),b="LOG_IN",h="LOG_OUT",O="GET_PHONES",m={isLogged:!1},p={phones:[]},g=Object(l.combineReducers)({logUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(u.a)(Object(u.a)({},e),{},{isLogged:!0});case h:return Object(u.a)(Object(u.a)({},e),{},{isLogged:!1});default:return e}},setPhones:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(u.a)(Object(u.a)({},e),{},{phones:t.payload});default:return e}}}),f=Object(l.createStore)(g,Object(j.composeWithDevTools)(Object(l.applyMiddleware)(d.a))),x=f,v=(n(102),n(103),n(5)),S=n(43),_="current user",L=function(){return!!localStorage.getItem(_)},w=n(1),y=function(e){var t=e.component,n=e.restricted,c=Object(S.a)(e,["component","restricted"]);return Object(w.jsx)(v.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return L()&&n?Object(w.jsx)(v.a,{to:"/"}):Object(w.jsx)(t,Object(u.a)({},e))}}))},N=function(e){var t=e.component,n=e.phones,c=Object(S.a)(e,["component","phones"]),o=x.getState();return Object(w.jsx)(v.b,Object(u.a)(Object(u.a)({},c),{},{render:function(e){return o.logUser.isLogged?Object(w.jsx)(t,Object(u.a)({phones:n},e)):Object(w.jsx)(v.a,{to:"/login"})}}))},I=n(208),k=(n(4),n(13),n(93)),T=Object(I.a)({form:"fieldLevelValidation"})((function(e){var t,n,c,o=e.history,s=(e.reset,Object(k.a)()),r=s.register,i=s.handleSubmit,a=s.watch,l=s.formState.errors,j=(x.getState(),a("email"));return console.log(a("email")),console.log("errors.email",l.email),console.log("errors.email.message",null===(t=l.email)||void 0===t?void 0:t.message),Object(w.jsxs)("form",{onSubmit:i((function(){var e,t;e=!0,x.dispatch({type:b,payload:e}),t=j,localStorage.setItem(_,t),o.push("/")})),className:"form",children:[" ",Object(w.jsx)("input",Object(u.a)(Object(u.a)({},r("email",{validate:{required:function(e){return e.length||"This field is required"},isCorrect:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||"Invalid email address"}}})),{},{className:"form__field"})),l.email&&Object(w.jsx)("span",{children:null===(n=l.email)||void 0===n?void 0:n.message})," ",Object(w.jsx)("input",Object(u.a)(Object(u.a)({},r("password",{validate:{required:function(e){return e.length||"This field is required"},length:function(e){return e.length>8||"Needs at least 8 symbols"},capital:function(e){return-1!==e.search(/[A-Z]/)||"Must contain at least 1 capital letter"},small:function(e){return-1!==e.search(/[a-z]/)||"Must contain at least 1 small letter"},digits:function(e){return-1!==e.search(/[0-9]/)||"Must contain at least 1 digit"}}})),{},{className:"form__field"})),l.password&&Object(w.jsx)("span",{children:null===(c=l.password)||void 0===c?void 0:c.message}),Object(w.jsx)("input",{type:"submit",className:"form__button"})]})})),C=function(e){var t=e.phones;return Object(c.useEffect)((function(){}),[]),Object(w.jsx)("main",{className:"main",children:Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)("ul",{children:null===t||void 0===t?void 0:t.map((function(e,n){var c,o,s=e.id,r=e.name,i=e.phone;return(null===(c=t[n-1])||void 0===c?void 0:c.name.last.slice(0,1))!==(null===(o=t[n])||void 0===o?void 0:o.name.last.slice(0,1))?Object(w.jsxs)("li",{className:"withSeparator",children:[Object(w.jsxs)("p",{children:[t[n].name.last.slice(0,1)," "]}),Object(w.jsx)("ul",{className:"firstInRow",children:Object(w.jsxs)("li",{children:[r.last," ",r.first,", phone: ",i]})})]},s):Object(w.jsxs)("li",{children:[r.last," ",r.first,", phone: ",i]},s)}))}),Object(w.jsx)(i.b,{to:"/home",children:"Go home"})]})})},F=function(){var e=function(){localStorage.removeItem(_),x.dispatch({type:h})},t=x.getState();return Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Home"}),t.logUser.isLogged||L()?Object(w.jsx)("button",{onClick:function(){return e()},children:"Click here to log out"}):Object(w.jsx)(i.b,{to:"/login",children:"Go to sign in page"})]})},G=Object(a.b)((function(e){return{phones:e.setPhones.phones,isLogged:e.logUser.isLogged,form:e.form}}))((function(e){var t=e.phones;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(v.d,{children:[Object(w.jsx)(y,{restricted:!1,component:F,path:"/home",exact:!0}),Object(w.jsx)(y,{restricted:!0,component:T,path:"/login",exact:!0}),Object(w.jsx)(N,{component:C,path:"/",exact:!0,phones:t}),Object(w.jsx)(v.a,{path:"/phone_book",to:"/login"})]})})})),M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,209)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),s(e),r(e)}))};r.a.render(Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(i.a,{children:Object(w.jsx)(a.a,{store:x,children:Object(w.jsx)(G,{})})})}),document.getElementById("root")),M()}},[[206,1,2]]]);
//# sourceMappingURL=main.deb1e1ae.chunk.js.map